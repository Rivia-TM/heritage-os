<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>HERITAGE OS</title>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<style>
body {
background: #0b0b0b;
color: white;
font-family: system-ui;
display: flex;
justify-content: center;
align-items: center;
height: 100vh;
margin: 0;
}

.container {
width: 320px;
}

input, button {
width: 100%;
padding: 12px;
margin: 6px 0;
background: #111;
border: 1px solid #333;
color: white;
}

button {
cursor: pointer;
background: #1a1a1a;
}

button:hover {
background: #222;
}

#status {
margin-top: 10px;
font-size: 12px;
color: #888;
}
</style>

</head>
<body>

<div class="container">

<input id="email" placeholder="email">
<input id="password" type="password" placeholder="password">

<button onclick="signup()">Créer compte</button>
<button onclick="login()">Connexion</button>
<button onclick="logout()">Logout</button>

<div id="status">Initialisation...</div>

</div>

<script>

const SUPABASE_URL = "https://qltdzmyfluockpadrhrk.supabase.co"

const SUPABASE_KEY = "sb_publishable_rwQseMv_s2m9agArPmsYmQ_rL18PNDn"

const client = supabase.createClient(
SUPABASE_URL,
SUPABASE_KEY
)

document.getElementById("status").innerText = "Client prêt."

async function signup() {

const email = emailInput()
const password = passwordInput()

const { error } = await client.auth.signUp({
email,
password
})

status(error ? error.message : "Compte créé.")
}

async function login() {

const email = emailInput()
const password = passwordInput()

const { error } = await client.auth.signInWithPassword({
email,
password
})

status(error ? error.message : "Connecté.")
}

async function logout() {

await client.auth.signOut()

status("Déconnecté.")
}

function emailInput() {
return document.getElementById("email").value
}

function passwordInput() {
return document.getElementById("password").value
}

function status(msg) {
document.getElementById("status").innerText = msg
}

</script>

</body>
</html>
