<!doctype html><html lang="fr"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Mot de passe oublié</title><link rel="stylesheet" href="/css/app.css?v=1"/></head>
<body><div class="page"><div class="bg-glow"></div><a class="toplink" href="/">Retour</a>
<div class="shell"><div class="card" style="text-align:left"><div class="smalltitle">HÉRITAGE</div><div class="h2">Mot de passe oublié</div>
<div class="p">Entrez votre e-mail. Vous recevrez un lien.</div>
<div class="field"><input id="email" type="email" placeholder="Adresse e-mail" inputmode="email" autocomplete="email"/><button class="btn-arrow" id="sendBtn">→</button></div>
<div class="msg" id="msg"></div></div></div></div>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script><script src="/js/config.js?v=1"></script><script src="/js/app.js?v=1"></script>
<script>
(function(){
  const {$, setMsg, makeClient} = window.HeritageApp;
  const msg=$("#msg");
  $("#sendBtn").addEventListener("click", async ()=>{
    setMsg(msg,"");
    const em=$("#email").value.trim();
    if(!em){ setMsg(msg,"Entrez votre e-mail.","error"); return; }
    const {client, error} = makeClient(true);
    if(error||!client){ setMsg(msg,"Configuration Supabase manquante (URL / ANON KEY).","error"); return; }
    $("#sendBtn").disabled=true;
    try{
      const redirectTo = location.origin + "/reset.html";
      await client.auth.resetPasswordForEmail(em,{redirectTo});
      setMsg(msg,"Si cet e-mail existe, un lien a été envoyé.","ok");
    } finally { $("#sendBtn").disabled=false; }
  });
})();
</script>
</body></html>
